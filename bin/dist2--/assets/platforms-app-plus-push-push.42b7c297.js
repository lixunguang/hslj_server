import{_ as e,a3 as n,s as t,o as s,c as o,w as a,i,a as l,b as u,m as p,r,d,e as c,v as m,Q as f}from"./index-886f4693.js";const g=e({data:()=>({title:"push",provider:[],pushServer:"http://demo.dcloud.net.cn/push/?",tranMsg:""}),onLoad:function(){n({service:"push",success:e=>{console.log("success",e),this.provider=e.provider},fail:e=>{console.log("获取推送通道失败",e)}})},onUnload:function(){this.tranMsg=""},methods:{listenTranMsg(){plus.push.addEventListener("click",(e=>{this.tranMsg=JSON.stringify(e)})),plus.push.addEventListener("receive",(e=>{this.tranMsg=JSON.stringify(e)})),t({title:"开始监听透传数据",icon:"success"})},requireTranMsg(){var e=plus.push.getClientInfo(),n=this.pushServer+"type=tran&appid="+encodeURIComponent(plus.runtime.appid);e.id&&(n+="&id="+e.id),n+="&cid="+encodeURIComponent(e.clientid),"iOS"==plus.os.name&&(n+="&token="+encodeURIComponent(e.token)),n+="&title="+encodeURIComponent("Hello uniapp"),n+="&content="+encodeURIComponent("带透传数据推送通知！"),"iOS"===plus.os.name?n+="&payload="+encodeURIComponent('{"title":"Hello uniapp Test","content":"test content"}'):n+="&payload="+encodeURIComponent('\'{"title":"Hello uniapp Test","content":"test content"}\''),n+="&version="+encodeURIComponent(plus.runtime.version),plus.runtime.openURL(n)}}},[["render",function(e,n,t,g,h,v){const C=r(c("page-head"),d),U=m,y=i,M=f;return s(),o(y,null,{default:a((()=>[l(C,{title:h.title},null,8,["title"]),h.provider[0]?(s(),o(y,{key:0,class:"uni-padding-wrap"},{default:a((()=>[l(y,{class:"uni-btn-v uni-common-mt"},{default:a((()=>[l(U,{type:"primary",onClick:v.listenTranMsg},{default:a((()=>[u("监听透传数据")])),_:1},8,["onClick"])])),_:1}),l(y,{class:"uni-btn-v uni-common-mt"},{default:a((()=>[l(U,{type:"primary",onClick:v.requireTranMsg},{default:a((()=>[u('发送"透传数据"消息')])),_:1},8,["onClick"])])),_:1}),l(y,{class:"uni-title uni-common-mt"},{default:a((()=>[u("透传内容：")])),_:1}),l(y,{class:"uni-textarea"},{default:a((()=>[l(M,{modelValue:h.tranMsg,"onUpdate:modelValue":n[0]||(n[0]=e=>h.tranMsg=e)},null,8,["modelValue"])])),_:1})])),_:1})):p("",!0)])),_:1})}]]);export{g as default};

import{bc as e,ai as t,am as a,al as l,_ as s,r as i,e as c,o,c as n,w as r,z as u,t as h,m,a as d,L as p,b as _,F as f,A as y,i as D,f as b,S as x}from"./index-886f4693.js";import{_ as k}from"./uni-icons.072c6819.js";const g=s({name:"uni-stat-select",mixins:[e.mixinDatacom||{}],data:()=>({showSelector:!1,current:"",mixinDatacomResData:[],apps:[],channels:[]}),props:{localdata:{type:Array,default:()=>[]},value:{type:[String,Number],default:""},modelValue:{type:[String,Number],default:""},label:{type:String,default:""},placeholder:{type:String,default:"请选择"},emptyTips:{type:String,default:"无选项"},clear:{type:Boolean,default:!0},defItem:{type:Number,default:0}},created(){this.last=`${this.collection}_last_selected_option_value`,this.collection&&!this.localdata.length&&this.mixinDatacomEasyGet()},computed:{typePlaceholder(){const e=this.placeholder,t={"opendb-stat-app-versions":"版本","opendb-app-channels":"渠道","opendb-app-list":"应用"}[this.collection];return t?e+t:e}},watch:{localdata:{immediate:!0,handler(e,t){Array.isArray(e)&&t!==e&&(this.mixinDatacomResData=e)}},modelValue(){this.initDefVal()},mixinDatacomResData:{immediate:!0,handler(e){e.length&&this.initDefVal()}}},methods:{initDefVal(){let e="";if(!this.value&&0!==this.value||this.isDisabled(this.value))if(!this.modelValue&&0!==this.modelValue||this.isDisabled(this.modelValue)){let a;if(this.collection&&(a=t(this.last)),a||0===a)e=a;else{let t="";this.defItem>0&&this.defItem<this.mixinDatacomResData.length&&(t=this.mixinDatacomResData[this.defItem-1].value),e=t}this.emit(e)}else e=this.modelValue;else e=this.value;const a=this.mixinDatacomResData.find((t=>t.value===e));this.current=a?this.formatItemName(a):""},isDisabled(e){let t=!1;return this.mixinDatacomResData.forEach((a=>{a.value===e&&(t=a.disable)})),t},clearVal(){this.emit(""),this.collection&&a(this.last)},change(e){e.disable||(this.showSelector=!1,this.current=this.formatItemName(e),this.emit(e.value))},emit(e){this.$emit("change",e),this.$emit("input",e),this.$emit("update:modelValue",e),this.collection&&l(this.last,e)},toggleSelector(){this.showSelector=!this.showSelector},formatItemName(e){let{text:t,value:a,channel_code:l}=e;return l=l?`(${l})`:"",this.collection.indexOf("app-list")>0?`${t}(${a})`:t||`未命名${l}`}}},[["render",function(e,t,a,l,s,g){const S=D,v=i(c("uni-icons"),k),V=b,w=x;return o(),n(S,{class:"uni-stat__select"},{default:r((()=>[a.label?(o(),u("span",{key:0,class:"uni-label-text hide-on-phone"},h(a.label+"："),1)):m("",!0),d(S,{class:p(["uni-stat-box",{"uni-stat__actived":s.current}])},{default:r((()=>[d(S,{class:"uni-select"},{default:r((()=>[d(S,{class:"uni-select__input-box",onClick:g.toggleSelector},{default:r((()=>[s.current?(o(),n(S,{key:0,class:"uni-select__input-text"},{default:r((()=>[_(h(s.current),1)])),_:1})):(o(),n(S,{key:1,class:"uni-select__input-text uni-select__input-placeholder"},{default:r((()=>[_(h(g.typePlaceholder),1)])),_:1})),s.current&&a.clear?(o(),n(v,{key:2,type:"clear",color:"#c0c4cc",size:"24",onClick:g.clearVal},null,8,["onClick"])):(o(),n(v,{key:3,type:s.showSelector?"top":"bottom",size:"14",color:"#999"},null,8,["type"]))])),_:1},8,["onClick"]),s.showSelector?(o(),n(S,{key:0,class:"uni-select--mask",onClick:g.toggleSelector},null,8,["onClick"])):m("",!0),s.showSelector?(o(),n(S,{key:1,class:"uni-select__selector"},{default:r((()=>[d(S,{class:"uni-popper__arrow"}),d(w,{"scroll-y":"true",class:"uni-select__selector-scroll"},{default:r((()=>[0===s.mixinDatacomResData.length?(o(),n(S,{key:0,class:"uni-select__selector-empty"},{default:r((()=>[d(V,null,{default:r((()=>[_(h(a.emptyTips),1)])),_:1})])),_:1})):(o(!0),u(f,{key:1},y(s.mixinDatacomResData,((e,t)=>(o(),n(S,{class:"uni-select__selector-item",key:t,onClick:t=>g.change(e)},{default:r((()=>[d(V,{class:p({"uni-select__selector__disabled":e.disable})},{default:r((()=>[_(h(g.formatItemName(e)),1)])),_:2},1032,["class"])])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})):m("",!0)])),_:1})])),_:1},8,["class"])])),_:1})}],["__scopeId","data-v-bd5f19f7"]]);export{g as _};
